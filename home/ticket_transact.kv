

<TicketTransactionScreeen>:
    opacity:0
    size_hint: 1,1
    pos_hint: {'center_x': 0.5,'center_y': 0.5}

    main_parent : main_parent 
    back_image : back_image
    back_text : back_text
    account_name : account_name
    account_name_info : account_name_info
    account_email : account_email 
    account_loc1 : account_loc1
    account_loc2 : account_loc2
    account_loc3 : account_loc3
    account_phone1 : account_phone1
    account_phone2 : account_phone2
    account_phone3 : account_phone3

    view_remarks_button : view_remarks_button
    add_remarks_button : add_remarks_button

    refresh_layout : refresh_layout

    geolocation_step_layout : geolocation_step_layout
    fiber_connection_step_layout : fiber_connection_step_layout
    poc_layout : poc_layout

    step1_layout : step1_layout
    poc_uploader_layout_1 : poc_uploader_layout_1
    poc_uploader_layout_2 : poc_uploader_layout_2
    poc_uploader_layout_3 : poc_uploader_layout_3
    poc_uploader_layout_4 : poc_uploader_layout_4
    poc_uploader_layout_5 : poc_uploader_layout_5
    poc_uploader_layout_6 : poc_uploader_layout_6
    poc_uploader_layout_7 : poc_uploader_layout_7
    poc_uploader_layout_8 : poc_uploader_layout_8
    poc_uploader_layout_9 : poc_uploader_layout_9
    poc_uploader_layout_10 : poc_uploader_layout_10
    poc_uploader_layout_11 : poc_uploader_layout_11
    poc_uploader_layout_12 : poc_uploader_layout_12
    poc_uploader_layout_13 : poc_uploader_layout_13
    poc_uploader_layout_14 : poc_uploader_layout_14
    for_review_layout : for_review_layout
    state_widget : state_widget
    details_widget : details_widget

    BoxLayout:
        id:main_parent
        pos_hint: {'center_x': 0.5,'top': 1}
        size_hint: 1,1
        orientation: 'vertical' 

        BoxLayout:
            orientation:'horizontal'
            size_hint: 1,0.1

            
            canvas.before:
                Color:
                    rgba : chex("#ACE2E1")
                Rectangle:
                    pos: self.pos
                    size: self.size
            
            Image:
                id: back_image
                source: root.go_back_icon if root.go_back_icon else None
                size_hint: 0.1 , 1
                # allow_stretch: True  # ✅ Allows scaling while maintaining aspect ratio
                # keep_ratio: True  # ✅ Ensures it doesn't distort
            LoginBackButton:
                id: back_text
                size_hint: 0.2,1  
                font_size: root.go_back_screen_font_size  
            
            Widget:
                size_hint: 0.7,1 


        CustomScrollView:
            id:refresh_layout
            size_hint: 1, 0.9

            
            MDGridLayout:
                id: ticket_list
                cols: 1
                adaptive_height: True
                padding: [dp(0), dp(0), dp(0), dp(30)]
                spacing: dp(0)
                size_hint_y: None  

                
                AccountNumberNameLayout: 
                    canvas.before:
                        Color:
                            rgba : chex("#ACE2E1")
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    id: account_name
                    size_hint: 1, None
                    height: sp(100)

                Widget:
                    size_hint: 1, None
                    height: sp(20)
                    canvas.before:
                        Color:
                            rgba : chex("#ACE2E1")
                        Rectangle:
                            pos: self.pos
                            size: self.size

                AccountInfoLayout:  
                    id:account_name_info
                AccountInfoLayout:
                    id: account_email
                AccountInfoLayout:
                    id: account_loc1
                AccountInfoLayout:
                    id: account_loc2
                AccountInfoLayout:
                    id: account_loc3
                AccountInfoLayout:
                    id: account_phone1
                AccountInfoLayout:
                    id: account_phone2
                AccountInfoLayout:
                    id: account_phone3
                AccountInfoLayout:
                    id: account_phone3
                AccountInfoLayout:
                    id: state_widget
                AccountInfoLayout:
                    id: details_widget
                

                Widget:
                    size_hint: 1, None
                    height: sp(20)
                    canvas.before:
                        Color:
                            rgba : chex("#ACE2E1")
                        Rectangle:
                            pos: self.pos
                            size: self.size

                Widget:
                    size_hint: 1, None
                    height: sp(20)


                MDBoxLayout:
                    orientation:'horizontal' 
                    size_hint: 1, None
                    adaptive_height: True
                    
                    
                    Widget:
                        
                    Button:
                        id: view_remarks_button
                        text: "VIEW REMARKS"
                        size_hint: None , None
                        size: sp(120) , sp(30) 
                        font_size: sp(14)
                        color: chex("#F7EEDD")
                        font_name: 'roboto_semibold'
                        background_color: (0 , 0, 0 ,0)
 
                        canvas.before:
                            Color:
                                rgba : chex("#008DDA")
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: (4, 4 ,4 ,4)
 
                    Widget:
                        width: sp(10)  
                        size_hint: None , 1
                        
                    Button:
                        id: add_remarks_button
                        text: "ADD REMARKS" 
                        size_hint: None , None
                        size: sp(120) , sp(30) 
                        color: chex("#F7EEDD")
                        font_size: sp(14)
                        font_name: 'roboto_semibold'
                        background_color: (0 , 0, 0 ,0)
                        canvas.before:
                            Color:
                                rgba : chex("#008DDA")
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: (4, 4 ,4 ,4)

                    Widget:
                        width: sp(10)  
                        size_hint: None , 1


                
                
                Step1Layout:
                    id: step1_layout
                        

                GeolocationStepLayout:
                    id: geolocation_step_layout


                FiberConnectionStepLayout:
                    id: fiber_connection_step_layout

                POCLayout:
                    id: poc_layout


                POCUploaderLayout:
                    id: poc_uploader_layout_1

                
                POCUploaderLayout:
                    id: poc_uploader_layout_2

                POCUploaderLayout:
                    id: poc_uploader_layout_3
                
                POCUploaderLayout:
                    id: poc_uploader_layout_4
                
                POCUploaderLayout:
                    id: poc_uploader_layout_5

                POCUploaderLayout:
                    id: poc_uploader_layout_6

                
                POCUploaderLayout:
                    id: poc_uploader_layout_7

                POCUploaderLayout:
                    id: poc_uploader_layout_8
                
                POCUploaderLayout:
                    id: poc_uploader_layout_9
                
                POCUploaderLayout:
                    id: poc_uploader_layout_10

                POCUploaderLayout:
                    id: poc_uploader_layout_11

                
                POCUploaderLayout:
                    id: poc_uploader_layout_12

                POCUploaderLayout:
                    id: poc_uploader_layout_13
                
                POCUploaderLayout:
                    id: poc_uploader_layout_14

                ForReviewLayout:
                    id: for_review_layout
                 




<POCFileUploaderModalView>: 
    size_hint: 1, 1
    auto_dismiss: True
    background: ""  # Removes default dim background
    background_color: 0, 0, 0, 0


    BoxLayout:
        orientation:'vertical' 
        spacing: sp(10)
        size_hint: 0.85 , 0.6
        pos_hint: { 'center_x': 0.5 , 'center_y': 0.5 }  
         
        


        FloatLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.15

            canvas.before:
                Color:
                    rgba: chex("#F7EEDD")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]
                Color:
                    rgba: chex("#014367")
                Line:
                    width: 2
                    rounded_rectangle: (*self.pos, *self.size, 4)

            TextInput:
                id: poc_file_input
                hint_text: "Enter File Name"
                size_hint: 0.9, None
                height: sp(33)
                background_color: 0,0,0,0 # Makes the background transparent
                background_normal: '' # Removes default background
                padding: [0, dp(10), 0, dp(5)] # Adds some padding above and below text
                cursor_color: chex("#014367")
                multiline: False 
                font_name: 'roboto_light'
                foreground_color: chex("#014367")
                font_size: sp(13)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                halign: 'center'
                valign: 'center'
                
                canvas.after:
                    Color:
                        rgba: chex("#014367")
                    Line:
                        points: [self.x, self.y, self.x + self.width, self.y]
                        width: 1
                    Color:
                        rgba: chex("#014367") 
            


        BoxLayout:
            orientation: 'vertical' 
            padding: (dp(5 ), dp(10) ,dp(5) , dp(10)) 
            size_hint: (1 , 0.85)

            canvas.before:
                Color:
                    rgba: chex("#F7EEDD")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]
                Color:
                    rgba: chex("#014367")
                Line:
                    rounded_rectangle: [self.x, self.y, self.width, self.height, 4]
                    width: 2


            Label:
                text: 'Preview of your file'
                font_name: 'roboto_extrabold'
                font_size: sp(12)
                text_size: self.width, None   
                valign: 'center'
                halign: 'center' 
                color: chex("#014367") 
                size_hint: 1, 0.1   
        
            FloatLayout:
                size_hint: 1, 0.9  # Full size for the map view

                Image:
                    source: root.file_image_path
                    size_hint: 0.9, 0.9
                    allow_stretch: True
                    keep_ratio: False
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    
                    canvas.before:
                        Color:
                            rgba: chex("#D9D9D9")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                
 
            MDBoxLayout:
                orientation: 'horizontal'
                size_hint: 1, None
                spacing: sp(5)
                height: sp(30)

                Button:
                    text: 'CANCEL' 
                    font_name: "roboto_semibold" 
                    background_color: (0, 0 , 0, 0)
                    size_hint: None, None
                    width: sp(80)
                    height: sp(25)
                    font_size: sp(12)
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#B71E1E")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                    on_release:
                        root.dismiss()
                
                Widget:
                    size_hint: 1, None

                Button:
                    text: 'SELECT FILE' 
                    font_name: "roboto_semibold" 
                    background_color: (0, 0 , 0, 0)
                    size_hint: None, None
                    width: sp(80)
                    height: sp(25)
                    font_size: sp(12)
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#014367")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                    on_release:
                        
                
                Widget:
                    size_hint: 1, None

                Button:
                    text: 'SUBMIT' 
                    font_name: "roboto_semibold" 
                    background_color: (0, 0 , 0, 0)
                    size_hint: None, None
                    width: sp(80)
                    height: sp(25)
                    font_size: sp(12)
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#5CBA45")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                















<ForReviewLayout>:
    orientation: 'vertical'
    adaptive_height: True
    padding: ( 0 , dp(20), 0, 0)

    BoxLayout:
        orientation:'horizontal'
        size_hint: 1, None
        height: dp(30)
        padding: (dp(20), 0 ,dp(20) , 0)

        Label:
            text:root.step_text
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_extrabold'
            font_size: sp(15)
            color: chex("#014367")
        
        MDIcon: 
            icon: "check-decagram"
            font_size: sp(20)
            color: chex("#ACE2E1") if root.is_not_done else chex("#5CBA45")
        
 

    MDBoxLayout:
        orientation: 'vertical'
        adaptive_height: True 
        padding: (dp(40), dp(10) , dp(20), 0)
        spacing:dp(10)
        
        Label:
            text:'Instructions :'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(13)
            color: chex("#014367")


        Label:
            text:'1. Click Submit for Review to finalize the ticket.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'2. Ensure that all previous steps have been completed successfully.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'3. The ticket will now be sent for verification and approval.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")


    MDBoxLayout:
        orientation: 'horizontal'
        adaptive_height: True
        padding: (0 , dp(20) , dp(20), 0)

        Widget:
    
        Button:
            text: "SUBMIT"
            font_name: "roboto_semibold"
            size_hint: None , None
            background_color: (0, 0 , 0, 0)
            width: sp(130) 
            height: sp(25)
            font_size: sp(12)
            color: chex("#F7EEDD")
            opacity: 0.5 if root.is_accessible else 1
            canvas.before:
                Color:
                    rgba: chex("#5CBA45")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]

<ClickableIcon>:
    icon: "plus"
    font_size: sp(20)
    color: chex("#014367")
    
<POCUploaderLayout>:
    orientation: 'vertical' 
    padding: ( dp(20) , 0, dp(20), dp(20))
    size_hint: 1, None
    height: dp(root.original_height)
    spacing: dp(10)
    # adaptive_height: True 

    poc_images_container : poc_images_container
    add_poc_image_button : add_poc_image_button

    Label:
        text: root.step_text
        text_size: self.width, None 
        size_hint_y: None
        height: self.texture_size[1]
        valign: 'center'
        halign: 'left'
        font_name: 'roboto_extrabold'
        font_size: sp(13)
        color: chex("#014367")
        
        
    Label:
        padding: (dp(20), 0, 0, 0)
        text: root.step_instruction
        text_size: self.width, None 
        size_hint_y: None
        height: self.texture_size[1]
        valign: 'center'
        halign: 'left'
        font_name: 'roboto_light'
        font_size: sp(12)
        color: chex("#014367")
    
    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, None
        height: dp(40)
        padding: (dp(20), dp(10),dp(20) , 0)
        
        FloatLayout:
            size_hint: None, None
            width: sp(40)
            height: sp(40)
            
            canvas.before:
                Color:
                    rgba : chex("#D9D9D9")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: (4, 4 ,4 ,4)
            
            ClickableIcon:
                id: add_poc_image_button
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                on_release:
                    root.upload_image()
 
            
        ScrollView:
            id: poc_image_scroll_view
            size_hint: 1, None
            height: sp(40)
            do_scroll_x: True
            do_scroll_y: False
            bar_width: dp(2)  # optional: makes scroll bar slimmer

            BoxLayout:
                id: poc_images_container
                orientation: 'horizontal'
                size_hint_y: 1
                size_hint_x: None
                spacing: dp(10)
                padding: dp(10), 0 
                # Make the layout wider than the ScrollView to enable scroll
                width: self.minimum_width
                
                # POCImageLayout:
                    
                # POCImageLayout:



<POCImageLayout>:
    size_hint: None , None
    width: sp(40) 
    height: sp(40)
    source: root.image_path
    allow_stretch: True
    keep_ratio: True






<POCLayout>:
    orientation: 'vertical'
    adaptive_height: True
    padding: ( 0 , dp(20), 0, 0)
    size_hint: 1, None 
    
    BoxLayout:
        orientation:'horizontal'
        size_hint: 1, None
        height: dp(30)
        padding: (dp(20), 0 ,dp(20) , 0)

        Label:
            text: root.step_text
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_extrabold'
            font_size: sp(15)
            color: chex("#014367")
        
        MDIcon: 
            icon: "check-decagram"
            font_size: sp(20)
            color: chex("#ACE2E1") if root.is_not_done else chex("#5CBA45")

    MDBoxLayout:
        orientation: 'vertical'
        adaptive_height: True 
        padding: (dp(40), dp(10) , dp(20), 0)
        spacing:dp(10)
        
        Label:
            text:'Instructions :'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(13)
            color: chex("#014367")


        Label:
            text:'1. Click Submit POC to upload proof of job completion.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'2. Ensure that the provided proof is clear and meets all requirements.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'3. Once uploaded, confirm submission to proceed to the next step.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")









<FiberConnectionModalView>:
    size_hint: 1, 1
    auto_dismiss: True
    background: ""  # Removes default dim background
    background_color: 0, 0, 0, 0
    
    rx : rx
    tx : tx
    
    BoxLayout:
        orientation:'vertical' 
        spacing: sp(10)
        size_hint: 0.85 , 0.9
        pos_hint: { 'center_x': 0.5 , 'center_y': 0.5 }  
         
        

        MDBoxLayout:
            orientation: 'vertical'
            adaptive_height: True
            padding: (dp(10 ), dp(10) ,dp(10) , dp(10))
            spacing: dp(15)

            canvas.before:
                Color:
                    rgba: chex("#F7EEDD")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]
                Color:
                    rgba: chex("#014367")
                Line:
                    rounded_rectangle: [self.x, self.y, self.width, self.height, 4]
                    width: 2

            Label:
                text: 'TX Level (Transmit Power) ;'
                font_name: 'roboto_extrabold'
                font_size: sp(12)
                text_size: self.width, None   
                valign: 'top'
                halign: 'left'
                font_name: 'roboto_semibold' 
                color: chex("#014367") 
                size_hint: 1, None
                height: sp(30)


                
            TextInput: 
                id: tx
                hint_text: "Enter the measured transmit power level."
                background_color: 0,0,0,0 # Makes the background transparent
                background_normal: '' # Removes default background
                padding: [0, dp(10), 0, dp(5)] # Adds some padding above and below text
                cursor_color: chex("#014367")
                multiline: False
                size_hint: 1, None
                height: sp(30)
                font_name: 'roboto_light'
                foreground_color: chex("#014367")
                font_size: sp(13)
                
                canvas.after:
                    Color:
                        rgba: chex("#014367")
                    Line:
                        points: [self.x, self.y, self.x + self.width, self.y]
                        width: 1.3
                    Color:
                        rgba: chex("#014367") 
            
            Label:
                text: 'RX Level (Receive Power) ;'
                font_name: 'roboto_extrabold'
                font_size: sp(12)
                text_size: self.width, None   
                valign: 'top'
                halign: 'left'
                font_name: 'roboto_semibold' 
                color: chex("#014367") 
                size_hint: 1, None
                height: sp(30)


                
            TextInput: 
                id: rx
                hint_text: "Enter the measured receive power level."
                background_color: 0,0,0,0 # Makes the background transparent
                background_normal: '' # Removes default background
                padding: [0, dp(10), 0, dp(5)] # Adds some padding above and below text
                cursor_color: chex("#014367")
                multiline: False
                size_hint: 1, None
                height: sp(30)
                font_name: 'roboto_light'
                foreground_color: chex("#014367")
                font_size: sp(13)
                
                canvas.after:
                    Color:
                        rgba: chex("#014367")
                    Line:
                        points: [self.x, self.y, self.x + self.width, self.y]
                        width: 1.3
                    Color:
                        rgba: chex("#014367") 
 

            BoxLayout:
                orientation: 'horizontal' 
                size_hint: 1, None 
                height: sp(24)
                padding: (0, 0,  0, 0) 

                Widget:
                    size_hint: 1, None

                Button:
                    size_hint: None, 1 
                    width: sp(100)
                    text: "SUBMIT"
                    background_color: (0, 0, 0, 0)
                    background_down: ''
                    font_name: 'roboto_semibold'
                    font_size: sp(13)
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#5CBA45") 
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                    opacity: 1 
                    on_release:
                        root.dismiss()


        Widget: 
            size_hint: (1 , 1)

            






<FiberConnectionStepLayout>:
    orientation: 'vertical'
    # adaptive_height: True
    padding: ( 0 , dp(20), 0, 0)
    size_hint: 1, None
    height: dp(root.original_height)
    

    set_fiber_button : set_fiber_button
    next_step_button : next_step_button 


    BoxLayout:
        orientation:'horizontal'
        size_hint: 1, None
        height: dp(30)
        padding: (dp(20), 0 ,dp(20) , 0)

        Label:
            text: root.step_text
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_extrabold'
            font_size: sp(15)
            color: chex("#014367")
        
        MDIcon: 
            icon: "check-decagram"
            font_size: sp(20)
            color: chex("#ACE2E1") if root.is_not_done else chex("#5CBA45")


    MDBoxLayout:
        orientation: 'vertical'
        adaptive_height: True 
        padding: (dp(40), dp(10) , dp(20), 0)
        spacing:dp(10)
        
        Label:
            text:'Instructions :'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(13)
            color: chex("#014367")


        Label:
            text:'1. Check the TX (Transmit) and RX (Receive) levels of the fiber connection.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'2. Ensure that the signal levels meet the required standards.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'3. If any issues are detected, document them and escalate if necessary.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

        Label:
            text:'3. Click Next Step to proceed after completing the verification.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

        
    BoxLayout: 
        orientation: 'horizontal'
        size_hint: 1, None
        height: sp(30)
        padding: (dp(40), dp(40), 0, 0)

        MDIcon: 
            icon: "router-wireless"
            font_size: sp(20)
            color: chex("#014367")
            size_hint: None, 1
            width: sp(50)

        Label:
            text: 'RX : '
            size_hint: None, 1
            width: sp(80)
            text_size: self.size
            valign: 'center'
            halign: 'right'
            font_name: 'roboto_semibold'
            font_size: sp(11)
            color: chex("#014367")

        Label:
            text: root.rx_level
            size_hint_x: 1  # ✅ Take remaining space
            size_hint_y: 1
            text_size: self.size
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

             
    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, None
        height: sp(30)
        padding: (dp(40), dp(40), 0, 0)

        
        MDIcon: 
            icon: "router-wireless"
            font_size: sp(20)
            color: chex("#014367")
            size_hint: None, 1
            width: sp(50)
            opacity: 0

        Label:
            text: 'TX : '
            size_hint: None, 1
            width: sp(80)
            text_size: self.size
            valign: 'center'
            halign: 'right'
            font_name: 'roboto_semibold'
            font_size: sp(11)
            color: chex("#014367")

        Label:
            text: root.tx_level
            size_hint_x: 1  # ✅ Take remaining space
            size_hint_y: 1
            text_size: self.size
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

    MDBoxLayout:
        orientation: 'horizontal'
        adaptive_height: True
        padding: (0 , dp(30) , dp(20), 0)
        spacing: dp(10)

        Widget:
            
            
        Button:
            id: set_fiber_button
            text: "SET FIBER" 
            font_name: "roboto_semibold"
            size_hint: None , None
            background_color: (0, 0 , 0, 0)
            width: sp(100) 
            height: sp(25)
            font_size: sp(12)
            color: chex("#F7EEDD")
            opacity: 1 if root.is_not_done else 0.5
            canvas.before:
                Color:
                    rgba: chex("#014367")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]
            on_release:
                root.parent_event() if root.parent_event and root.is_not_done else None

    
        Button:
            id: next_step_button
            text: "NEXT STEP" 
            font_name: "roboto_semibold"
            size_hint: None , None
            background_color: (0, 0 , 0, 0)
            width: sp(100) 
            height: sp(25)
            font_size: sp(12)
            color: chex("#F7EEDD")
            opacity: 1 if root.is_valid_level else 0.5
            on_release:
                root.procced_event() if root.is_valid_level and root.procced_event and root.is_not_done else None
            canvas.before:
                Color:
                    rgba: chex("#5CBA45")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]






















<GeolocationModalView>:
    size_hint: 1, 1
    auto_dismiss: True
    background: ""  # Removes default dim background
    background_color: 0, 0, 0, 0

    map : map
    location_input : location_input
    
    BoxLayout:
        orientation:'vertical' 
        spacing: sp(10)
        size_hint: 0.85 , 0.9
        pos_hint: { 'center_x': 0.5 , 'center_y': 0.5 }  
         
        

        MDBoxLayout:
            orientation: 'vertical'
            adaptive_height: True
            padding: (dp(10 ), dp(10) ,dp(10) , dp(10))
            spacing: dp(15)

            canvas.before:
                Color:
                    rgba: chex("#F7EEDD")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]
                Color:
                    rgba: chex("#014367")
                Line:
                    rounded_rectangle: [self.x, self.y, self.width, self.height, 4]
                    width: 2

            Label:
                text: 'Not Working? Just fill this up based on the google map'
                font_name: 'roboto_extrabold'
                font_size: sp(12)
                text_size: self.width, None   
                valign: 'top'
                halign: 'left'
                font_name: 'roboto_light' 
                color: chex("#014367") 
                size_hint: 1, None
                height: sp(30)


                
            TextInput: 
                id: location_input
                hint_text: "Enter Pin Location . . ."
                background_color: 0,0,0,0 # Makes the background transparent
                background_normal: '' # Removes default background
                padding: [0, dp(10), 0, dp(5)] # Adds some padding above and below text
                cursor_color: chex("#014367")
                multiline: False
                size_hint: 1, None
                height: sp(30)
                font_name: 'roboto_light'
                foreground_color: chex("#014367")
                font_size: sp(13)
                
                canvas.after:
                    Color:
                        rgba: chex("#014367")
                    Line:
                        points: [self.x, self.y, self.x + self.width, self.y]
                        width: 1.3
                    Color:
                        rgba: chex("#014367") 
            
            BoxLayout:
                orientation: 'horizontal' 
                size_hint: 1, None 
                height: sp(24)
                padding: (0, 0,  0, 0) 

                Widget:
                    size_hint: 1, None

                Button:
                    size_hint: None, 1 
                    width: sp(100)
                    text: "SUBMIT"
                    background_color: (0, 0, 0, 0)
                    background_down: ''
                    font_name: 'roboto_semibold'
                    font_size: sp(13)
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#5CBA45")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                    opacity: 1 if root.is_valid_location else 0.5
                    on_release:
                        if root.is_valid_location: root.dismiss()


        MDBoxLayout:
            orientation: 'vertical' 
            padding: (dp(10 ), dp(10) ,dp(10) , dp(10)) 
            size_hint: (1 , 1)

            canvas.before:
                Color:
                    rgba: chex("#F7EEDD")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]
                Color:
                    rgba: chex("#014367")
                Line:
                    rounded_rectangle: [self.x, self.y, self.width, self.height, 4]
                    width: 2


            Label:
                text: 'Take Screenshot when using this for POC'
                font_name: 'roboto_extrabold'
                font_size: sp(12)
                text_size: self.width, None   
                valign: 'center'
                halign: 'center' 
                color: chex("#014367") 
                size_hint: 1, 0.1   
        
            FloatLayout:
                size_hint: 1, 0.9  # Full size for the map view
                id: map

                canvas.before:
                    Color:
                        rgba: chex("#014367")
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [4]

            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, None
                height: sp(25)

                Label:
                    text: root.lat
                    size_hint_x: 0.5   
                    size_hint_y: 1
                    text_size: self.size
                    valign: 'center'
                    halign: 'left'
                    font_name: 'roboto_light'
                    font_size: sp(9)
                    color: chex("#014367")    
                    markup: True

                Label:
                    text: root.lon
                    size_hint_x: 0.5   
                    size_hint_y: 1
                    text_size: self.size
                    valign: 'center'
                    halign: 'left'
                    font_name: 'roboto_light'
                    font_size: sp(9)
                    color: chex("#014367")    
                    markup: True
                    
                        
                    

            MDBoxLayout:
                orientation: 'horizontal'
                adaptive_height: True

                Button:
                    text: 'CANCEL' 
                    font_name: "roboto_semibold" 
                    background_color: (0, 0 , 0, 0)
                    width: sp(130)  
                    font_size: sp(12)
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#B71E1E")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                    on_release:
                        root.dismiss()
                
                Widget:
                    size_hint: 1, None 
                    height: sp(25)

                Button:
                    text: 'SUBMIT' 
                    font_name: "roboto_semibold" 
                    background_color: (0, 0 , 0, 0)
                    width: sp(130) 
                    height: sp(25)
                    font_size: sp(12)
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#5CBA45")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]
                    on_release:
                        root.dismiss()





<GeolocationStepLayout>:
    orientation: 'vertical'
    # adaptive_height: True
    padding: ( 0 , dp(20), 0, dp(20))
    size_hint: 1, None
    height: dp(root.original_height)
    

    set_location_button : set_location_button
    next_step_button : next_step_button
    location_info : location_info


    BoxLayout:
        orientation:'horizontal'
        size_hint: 1, None
        height: dp(30)
        padding: (dp(20), 0 ,dp(20) , 0)

        Label:
            text: root.step_text
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_extrabold'
            font_size: sp(15)
            color: chex("#014367")
        
        MDIcon: 
            icon: "check-decagram"
            font_size: sp(20)
            color: chex("#ACE2E1") if root.is_not_done else chex("#5CBA45")


    MDBoxLayout:
        orientation: 'vertical'
        adaptive_height: True 
        padding: (dp(40), dp(10) , dp(20), 0)
        spacing:dp(10)
        
        Label:
            text:'Instructions :'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(13)
            color: chex("#014367")


        Label:
            text:'1. Click Submit Geo-Mapping to provide location details.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'2. Verify that the geo-mapping data is accurate before submitting.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'3. Once submitted, proceed to the next step for final checks.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

        
    BoxLayout:
        id: location_info
        orientation: 'horizontal'
        size_hint: 1, None
        height: sp(30)
        padding: (dp(40), dp(40), 0, 0)

        MDIcon: 
            icon: "home-map-marker"
            font_size: sp(20)
            color: chex("#014367")
            size_hint: None, 1
            width: sp(50)

        Label:
            text: 'Latitude : '
            size_hint: None, 1
            width: sp(80)
            text_size: self.size
            valign: 'center'
            halign: 'right'
            font_name: 'roboto_semibold'
            font_size: sp(11)
            color: chex("#014367")

        Label:
            text: root.latitude
            size_hint_x: 1  # ✅ Take remaining space
            size_hint_y: 1
            text_size: self.size
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

             
    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, None
        height: sp(30)
        padding: (dp(40), dp(40), 0, 0)

        
        MDIcon: 
            icon: "home-map-marker"
            font_size: sp(20)
            color: chex("#014367")
            size_hint: None, 1
            width: sp(50)
            opacity: 0

        Label:
            text: 'Longitude : '
            size_hint: None, 1
            width: sp(80)
            text_size: self.size
            valign: 'center'
            halign: 'right'
            font_name: 'roboto_semibold'
            font_size: sp(11)
            color: chex("#014367")

        Label:
            text: root.longitude
            size_hint_x: 1  # ✅ Take remaining space
            size_hint_y: 1
            text_size: self.size
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

    MDBoxLayout:
        orientation: 'horizontal'
        adaptive_height: True
        padding: (0 , dp(30) , dp(20), 0)
        spacing: dp(10)

        Widget:
            
            
        Button:
            id: set_location_button
            text: "SET LOCATION" 
            font_name: "roboto_semibold"
            size_hint: None , None
            background_color: (0, 0 , 0, 0)
            width: sp(100) 
            height: sp(25)
            font_size: sp(12)
            color: chex("#F7EEDD")
            opacity: 1 if root.is_not_done else 0.5
            canvas.before:
                Color:
                    rgba: chex("#014367")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]
            on_release:
                root.parent_event() if root.parent_event and root.is_not_done else None

    
        Button:
            id: next_step_button
            text: "NEXT STEP" 
            font_name: "roboto_semibold"
            size_hint: None , None
            background_color: (0, 0 , 0, 0)
            width: sp(100) 
            height: sp(25)
            font_size: sp(12)
            color: chex("#F7EEDD")
            opacity: 1 if root.longitude != '0' and root.latitude != '0' else 0.5
            on_release:
                root.procced_event(geo_map = root.get_data()) if root.is_okey_to_proceed() else None
            canvas.before:
                Color:
                    rgba: chex("#5CBA45")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]



<Step1Layout>:
    orientation: 'vertical'
    adaptive_height: True
    padding: ( 0 , dp(20), 0, 0)

    next_step_button : next_step_button

    BoxLayout:
        orientation:'horizontal'
        size_hint: 1, None
        height: dp(30)
        padding: (dp(20), 0 ,dp(20) , 0)

        Label:
            text:'Step 1: Initial Assessment'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_extrabold'
            font_size: sp(15)
            color: chex("#014367")
        
        MDIcon: 
            icon: "check-decagram"
            font_size: sp(20)
            color: chex("#ACE2E1") if root.is_not_done else chex("#5CBA45")
        
 

    MDBoxLayout:
        orientation: 'vertical'
        adaptive_height: True 
        padding: (dp(40), dp(10) , dp(20), dp(10))
        spacing:dp(10)
        
        Label:
            text:'Instructions :'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(13)
            color: chex("#014367")


        Label:
            text:'1. Click Next Step or Activate Account to proceed with the ticket.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'2. Review the ticket details and ensure all necessary information is correct.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")

            
        Label:
            text:'3. If additional remarks are needed, click Add Remark before proceeding.'
            text_size: self.width, None 
            size_hint_y: None
            height: self.texture_size[1]
            valign: 'center'
            halign: 'left'
            font_name: 'roboto_light'
            font_size: sp(11)
            color: chex("#014367")


    AnchorLayout:
        anchor_x: 'right'
        anchor_y: 'center'
        padding: (0, 0, dp(10), 0) 
        size_hint: (1, None)
        adaptive_height: True

        # Widget:

        Button:
            id: next_step_button
            text: "NEXT STEP" if root.old_account else "ACTIVATE ACCOUNT"
            size_hint: None, None
            height: dp(33)
            width: dp(130)
            background_color: (0, 0, 0, 0)
            font_name: "roboto_semibold"
            font_size: sp(12)
            color: chex("#F7EEDD")
            opacity: 1 if root.is_not_done else 0.5
            canvas.before:
                Color:
                    rgba: chex("#5CBA45")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [4]




<RemarksListViewer>: 
    size_hint: 1, 1
    auto_dismiss: True
    background: ""  # Removes default dim background
    background_color: 0, 0, 0, 0
 

    BoxLayout:
        orientation:'vertical'
        padding: sp(20)
        spacing: sp(10)
        size_hint: 0.85 , 0.9
        pos_hint: { 'center_x': 0.5 , 'center_y': 0.5 }  
         
        
        canvas.before:
            Color:
                rgba: chex("#F7EEDD")
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [10]
            Color:
                rgba: chex("#014367")
            Line:
                width: 2
                rounded_rectangle: (*self.pos, *self.size, 10)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1 , None
            height: sp(30)

            Label:
                text: "Remarks ;"
                text_size: self.width, None 
                size_hint_y: None
                height: self.texture_size[1]
                valign: 'top'
                halign: 'left'
                font_name: 'roboto_light'
                font_size: sp(15)
                color: chex("#014367") 
                markup: True
            
            Button:
                text: "CLOSE" 
                font_name: "roboto_semibold"
                size_hint: None , 1
                background_color: (0, 0 , 0, 0)
                width: sp(100) 
                font_size: sp(12)
                on_release: root.dismiss()
                color: chex("#F7EEDD")
                canvas.before:
                    Color:
                        rgba: chex("#B71E1E")
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [4]

        ScrollView: 
            MDGridLayout:
                cols: 1
                adaptive_height: True
                padding: dp(10)
                spacing: dp(10)
                size_hint_y: None

                Remark:
                Remark:
                Remark:

<Remark>:
    padding: dp(10), dp(10)
    size_hint_x: 0.75
    size_hint_y: None
    height: self.minimum_height

    canvas.before:
        Color:
            rgba: chex("#ACE2E1")
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [4]

    Label:
        text: root.remark_text
        text_size: self.width, None
        size_hint_y: None
        height: self.texture_size[1]
        valign: 'top'
        halign: 'left'
        font_name: 'roboto_light'
        font_size: sp(15)
        color: chex("#014367")



<RemarksInputLayout>:
    size_hint: 1, 1
    auto_dismiss: True
    background: ""  # Removes default dim background
    background_color: 0, 0, 0, 0

    remark_text : remark_text

    RelativeLayout:
        size_hint: 1, 1
    
        BoxLayout:
            orientation: 'vertical' 
            padding: sp(20)
            spacing: sp(10)
            size_hint: 0.85 , 0.5
            pos_hint: { 'center_x': 0.5 , 'top': 0.95 }  

            canvas.before:
                Color:
                    rgba: chex("#F7EEDD")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]
                Color:
                    rgba: chex("#014367")
                Line:
                    width: 2
                    rounded_rectangle: (*self.pos, *self.size, 10)


            Label:
                text: "Fill this up and hit submit to add this remarks" 
                halign: "center" 
                size_hint: 1, 0.1
                font_size: sp(11)
                color: chex("#014367")  # This is the actual text color
                font_name: 'roboto_extrabold'

            TextInput: 
                id: remark_text
                hint_text: "Provide your remarks here . . ." 
                multiline: True 
                size_hint: 1, 0.8
                background_color: 0, 0, 0, 0  # Transparent
                foreground_color: chex("#014367")  # This is the actual text color
                cursor_color: chex("#014367")  # Optional, to see the cursor better
                font_name: 'roboto_light'
                font_size: sp(10)
                padding: dp(10), dp(10)  # Add padding for readability

                canvas.before:
                    Color:
                        rgba: chex("#D9D9D9") #
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [4]
                    Color:
                        rgba: chex("#014367") 


            BoxLayout:
                size_hint: 1 , 0.1
                spacing: sp(10)

                Button:
                    text: "CLOSE" 
                    size_hint: None , 1
                    background_color: (0, 0 , 0, 0)
                    color: chex("#F7EEDD")
                    width: sp(100) 
                    font_size: sp(12)
                    on_release: root.dismiss()
                    canvas.before:
                        Color:
                            rgba: chex("#B71E1E")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]

                Widget:
                    

                Button:
                    text: "SUBMIT" 
                    size_hint: None , 1
                    background_color: (0, 0 , 0, 0)
                    width: sp(100) 
                    font_size: sp(12)
                    opacity: 1 if root.is_ready_to_submit else 0.5
                    color: chex("#F7EEDD")
                    canvas.before:
                        Color:
                            rgba: chex("#5CBA45")
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [4]






















<AccountInfoLayout>:
    size_hint_x: 1
    adaptive_height: True
    orientation: 'horizontal'

    info_label : info_label
 
    canvas.before:
        Color:
            rgba : chex("#ACE2E1")
        Rectangle:
            pos: self.pos
            size: self.size

    RelativeLayout:
        pos_hint: {'top': 1}
        size_hint_x: 0.25
        size_hint_y: None
        height: sp(30) 
 
        MDIcon:
            icon: root.icon_image
            font_size: sp(20)
            color: chex("#014367")
            pos_hint: {'center_x': 0.7, 'top': 1}

    Label:
        id: info_label
        text: root.account_info
        text_size: self.width, None
        size_hint_x: 0.75
        size_hint_y: None
        height: self.texture_size[1]
        valign: 'top'
        halign: 'left'
        font_name: 'roboto_light' if root.info_color == '' else 'roboto_extrabold'
        font_size: sp(15)
        color: chex("#014367") if root.info_color == '' else chex(root.info_color)
        pos_hint: {'top': 0.9}
        markup: True
        



<AccountNumberNameLayout>:
    orientation: 'horizontal'


    RelativeLayout:
        size_hint: 0.3 , 1 
        
        Image:
            # size : 0 , sp(100)
            pos_hint: {'center_x' : 0.5, 'center_y' : 0.5}
            size_hint: None, None
            size: sp(60) , sp(60)
            allow_stretch: True
            keep_ratio: True            
            source: root.account_image

    BoxLayout:
        orientation: 'vertical'
        size_hint: 0.7 , 1

        Label:
            text_size: self.size
            valign: 'middle'
            halign: 'left'
            text: "Account Number;"
            size_hint: 1 , 0.3
            font_name: 'roboto_light'
            font_size: sp(15)
            color: chex("#000000")

        Label:
            text:root.ticket_number
            size_hint: 1 , 0.7
            font_name: 'roboto_extrabold'
            font_size: sp(30)
            color: chex("#014367")
            text_size: self.size
            valign: 'middle'
            halign: 'center'








